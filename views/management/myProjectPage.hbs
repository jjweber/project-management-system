<div class="welcomeEmp">
    <h1 class="welcomeTitle">Hello {{ empName }}!</h1>
    <h3>Here are your projects.</h3>
</div>

<div class="myProjectList">
    <!--
    <div class="row">
        <div class="col">
            <form>
                <div class="form-group">
                    <select class="custom-select" name="categoryFilter" id="categoryFilter">
                        <option class="selectedFilter" id="selectedFilter1" value="Type">Type</option>
                        <option class="selectedFilter" id="selectedFilter2" value="Name">Name</option>
                        <option class="selectedFilter" id="selectedFilter3" value="Status">Status</option>
                        <option class="selectedFilter" id="selectedFilter4" value="Due Date">Due Date</option>
                        <option class="selectedFilter" id="selectedFilter5" value="Contractor">Contractor</option>
                    </select>
                    <script>
                        document.getElementById("categoryFilter").onchange = function() {myFunction()};
                        console.log(this.projects);
                        function myFunction() {
                            let filterBy = document.getElementById('categoryFilter').value;
                            if (filterBy == "Type") {
                                this.projects.sort(function (x, y) {
                                    return x.projectType - y.projectType;
                                });
                            } 
                            else if (filterBy == "Name") {
                                this.projects.sort(function (x, y) {
                                    return x.name - y.name;
                                });            
                            } 
                            else if (filterBy == "Status") {
                                this.projects.sort(function (x, y) {
                                    return x.status - y.status;
                                });            
                            } else {
                                this.projects.sort(function (x, y) {
                                    return x.contractor - y.contractor;
                                });            
                            } 
                        }
                    </script>
                </div>
            </form>           
        </div>

        <div class="col">
            <fieldset class="form-group">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search Projects for...">
                    <span class="input-group-btn">
                    <button class="btn btn-secondary" type="button">
                        <i class="fas fa-search"></i>
                    </button>
                    </span>
                </div>
            </fieldset>
        </div>
    </div>
    -->
    <table class="table table-striped table-dark">
        <thead>
            <tr>
                <th scope="col">Type</th>
                <th scope="col">Project Name</th>                
                <th scope="col">Status</th>
                <th scope="col">Due Date</th>
                <th scope="col">Contractor</th>
                <th scope="col">Project Notes</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
        {{# each projects}}
            <tr>
                <td>{{ projectType }}</td>
                <td>{{ name }}</td>
                <td>{{ status }}</td>
                <td>{{ formatDate dueDate day="numeric" month="numeric" year="numeric" }}</td>
                <td>{{ contractor }}</td>
                <td>{{ notes }}</td>
                <td>
                    <a class="btn" href="/projects/read/{{ id }}">Read</a>
                    <a class="btn" href="/projects/edit/{{ id }}">Edit</a>
                </td>
            </tr>
        {{/each}}
        </tbody>
    </table>    
</div>
